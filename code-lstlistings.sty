\usepackage{listings}
\usepackage{xcolor}
\usepackage{etoolbox}
\usepackage{xstring}

%-----------------------------------------------------
% LISTING CONFIGURATIONS
%-----------------------------------------------------

\crefname{lstlisting}{listing}{listing}	
\Crefname{lstlisting}{Listing}{Listing}
\renewcommand\lstlistlistingname{List of Listings}

\lstset{
	showstringspaces=false,
	basicstyle=\scriptsize\ttfamily,
	commentstyle={\color{olive}},
	identifierstyle=\color{black},
	ndkeywordstyle={\color{blue}},
	stringstyle={\color{magenta}},
	emphstyle={},
	keywordstyle={\color{blue}},
	breaklines=true,
	numbers=left,
	numberstyle=\tiny\color{gray},
	numbersep=10pt,
	tabsize=2,
	extendedchars=true,
	frame=single,
	frameround=fttt,
}

\lstdefinelanguage{Kotlin}{
	comment=[l]{//},
	emph={delegate, filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println, return@},
	keywords={abstract, actual, as, as?, break, by, class, companion, continue, data, do, dynamic, else, enum, expect, false, final, for, fun, get, if, import, in, interface, internal, is, null, object, override, package, private, public, return, set, super, suspend, this, throw, true, try, typealias, val, var, vararg, when, where, while},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Unit, it},
	sensitive=true
}

\lstdefinelanguage{XC}{
	%basicstyle=\normalsize\fontfamily{fvm}\lst@ifdisplaystyle\footnotesize\fi,
	basicstyle=\normalsize\ttfamily\lst@ifdisplaystyle\footnotesize\fi,
	frame=single,
	basewidth=0.50em,
	sensitive=true,
	morestring=[b]",
	morecomment=[l]{//},
	morecomment=[n]{/*}{*/},
	commentstyle=\color{darkgreen},
	keywordstyle=\color{blue}\textbf, keywords={def,if,else,val,return,send,retsend},
	%keywordstyle=[2]\color{violet}\textbf, keywords=[2]{let,in},
	keywordstyle=[3]\color{violet}, keywords=[3]{updateSelf,self,fst,snd,and,or,nbrDist,uid,nfold,mux,pair,exchange},
	%false, true, and not occurring in examples' source
	keywordstyle=[4]\color{red}, keywords=[4]{let,in},
	literate=
	{NVn}{{\underline{n}}}2
	{NVnum}{{\underline{num}}}3
	{NVbool}{{\underline{bool}}}4
	{NVsenseDist}{{\underline{senseDist}}}9
}

\lstdefinelanguage{Protelis}{
    language=Java,
	basicstyle=\linespread{1.0}\small\ttfamily\lst@ifdisplaystyle\footnotesize\fi,
    columns=fullflexible,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    keywordstyle=[2]\color{blue},
    keywords={def, else, import, mux, sumHood, PlusSelf, let, rep, env, self, pi, if, public, NaN, false, true, minHood, nbr, it, share},
    keywords=[2]{POSITIVE_INFINITY, map, reduce, sin, cos, foldMin, min, get, set, gossip, distanceTo},
    keywords=[3]{nbrRange, nbrVersor, foldUnion, foldSum},
    breaklines=true,
    captionpos=b,
    keepspaces=true,
	numbers=left,
    xleftmargin=0.4cm,
    backgroundcolor=\color{white},
    keywordstyle=\bfseries\color{purple},
    emphstyle={\bfseries\color{blue!40!black}},
    stringstyle=\ttfamily\color{orange},
    commentstyle=\ttfamily\color{green!40!black},
    escapechar=\%
    frame=single,
}

\lstdefinestyle{yaml}{
	basicstyle=\ttfamily\footnotesize,
	identifierstyle=\color{blue},
	rulecolor=\color{black},
	string=[s]{'}{'},
	stringstyle=\color{blue},
	classoffset=1,
	otherkeywords={\&, \*, -, \[, \]},
	morekeywords={\&, \*, -, \[, \]},
	keywordstyle=\color{blue},
	classoffset=0,
	comment=[l]{:},
	commentstyle=\color{black},
}
